<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Download Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #1a1a1a;
            color: white;
        }
        button {
            background: #3B82F6;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 10px;
            border-radius: 5px;
            cursor: pointer;
        }
        button:hover {
            background: #2563eb;
        }
    </style>
</head>
<body>
    <h1>Download Test</h1>
    <p>Testing download functionality...</p>
    
    <button onclick="testDownload()">Test Download</button>
    
    <script>
        function testDownload() {
            console.log("Test download clicked");
            
            // Test SVG generation
            const svgContent = generateSVG('test');
            console.log("SVG generated:", svgContent);
            
            // Test SVG download
            downloadSVG(svgContent, 'test-logo.svg');
            console.log("SVG download initiated");
            
            // Test PNG download
            downloadPNG(svgContent, 'test-logo.png');
            console.log("PNG download initiated");
        }

        function generateSVG(type) {
            const size = 800;
            let svgContent = `<svg width="${size}" height="${size}" viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg">`;
            
            let color = "#3B82F6";
            
            svgContent += `
                <!-- Flowing connection lines -->
                <path d="M20 20 Q60 40 100 20" stroke="${color}" stroke-width="6" fill="none" stroke-linecap="round"/>
                <path d="M20 100 Q60 80 100 100" stroke="${color}" stroke-width="6" fill="none" stroke-linecap="round"/>
                
                <!-- Main Z shape - bold and geometric -->
                <path d="M25 25 L95 25 L25 95 L95 95" stroke="${color}" stroke-width="16" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
                
                <!-- Subtle flowing accent lines -->
                <path d="M30 30 Q60 50 90 30" stroke="${color}" stroke-width="4" fill="none" stroke-linecap="round" opacity="0.6"/>
                <path d="M30 90 Q60 70 90 90" stroke="${color}" stroke-width="4" fill="none" stroke-linecap="round" opacity="0.6"/>
                
                <!-- Connection dots -->
                <circle cx="25" cy="25" r="6" fill="${color}"/>
                <circle cx="95" cy="25" r="6" fill="${color}"/>
                <circle cx="25" cy="95" r="6" fill="${color}"/>
                <circle cx="95" cy="95" r="6" fill="${color}"/>
            `;
            
            svgContent += '</svg>';
            return svgContent;
        }

        function downloadSVG(svgContent, filename) {
            console.log("downloadSVG called with:", filename);
            try {
                const blob = new Blob([svgContent], { type: 'image/svg+xml' });
                const url = URL.createObjectURL(blob);
                const link = document.createElement('a');
                link.href = url;
                link.download = filename;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                URL.revokeObjectURL(url);
                console.log("SVG download completed");
            } catch (error) {
                console.error("SVG download error:", error);
            }
        }

        function downloadPNG(svgContent, filename) {
            console.log("downloadPNG called with:", filename);
            try {
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                canvas.width = 800;
                canvas.height = 800;
                
                const svgBlob = new Blob([svgContent], {type: 'image/svg+xml;charset=utf-8'});
                const svgUrl = URL.createObjectURL(svgBlob);
                
                const img = new Image();
                img.onload = function() {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
                    
                    canvas.toBlob(function(blob) {
                        const url = URL.createObjectURL(blob);
                        const a = document.createElement('a');
                        a.href = url;
                        a.download = filename;
                        document.body.appendChild(a);
                        a.click();
                        document.body.removeChild(a);
                        URL.revokeObjectURL(url);
                        console.log("PNG download completed");
                    }, 'image/png', 1.0);
                    
                    URL.revokeObjectURL(svgUrl);
                };
                img.onerror = function(error) {
                    console.error("Image load error:", error);
                };
                img.src = svgUrl;
            } catch (error) {
                console.error("PNG download error:", error);
            }
        }
    </script>
</body>
</html>
